# Workflow UI/UX Enhancement Quick Start

## 快速开始指南

本指南帮助你快速上手使用新的工作流 UI/UX 增强功能。

## 1. 基本使用

### 启动应用

```bash
npm run dev
```

访问 `http://localhost:3000` 并导航到工作流编辑器。

## 2. 节点库使用

### 打开节点库

- 点击画布左侧的工具栏按钮（三层图标）
- 节点库将从左侧滑入

### 搜索节点

1. 在节点库顶部的搜索框中输入关键词
2. 支持搜索节点名称、描述、类型
3. 点击清除按钮（×）重置搜索

### 浏览分类

1. 点击分类标题展开/收起该分类
2. 默认展开：流程控制、基础控制、移动控制
3. 每个分类显示节点数量徽章

### 添加节点

1. 找到需要的节点
2. 拖拽节点到画布
3. 释放鼠标放置节点
4. 观察节点的淡入动画

### 查看节点详情

- 将鼠标悬停在节点上
- 工具提示将显示：
  - 节点名称
  - 详细描述
  - 参数数量

## 3. 节点操作

### 节点状态

节点有以下状态，每种状态都有独特的视觉效果：

- **空闲** (灰色): 未执行
- **运行中** (橙色): 正在执行，带脉冲动画
- **成功** (绿色): 执行成功
- **错误** (红色): 执行失败
- **跳过** (紫色): 被跳过

### 节点交互

- **悬停**: 节点会轻微放大并上移
- **点击**: 节点会缩小反馈
- **双击**: 打开节点配置对话框
- **拖拽**: 移动节点位置

### 连接节点

1. 从源节点底部的连接点拖出
2. 连接到目标节点顶部的连接点
3. 观察连接线的绘制动画
4. 运行时连接线会显示流动效果

## 4. 控制面板使用

### 查看状态

控制面板顶部显示：
- **无人机连接状态**: 绿色 = 已连接，红色 = 未连接
- **WebSocket 状态**: 脉冲点 = 在线，静态点 = 离线

### 控制按钮

**运行工作流** (绿色)
- 开始执行工作流
- 需要无人机已连接
- 运行时按钮显示"运行中..."

**停止** (红色)
- 停止当前执行
- 仅在运行时可用

**AI 生成工作流** (紫色)
- 打开 AI 生成对话框
- 输入自然语言描述
- AI 自动生成工作流

**保存工作流** (蓝色/橙色)
- 保存当前工作流
- 有未保存更改时显示橙色脉冲
- 右上角显示未保存徽章

**加载** / **清空**
- 加载：打开工作流管理器
- 清空：清空当前画布

### 查看日志

1. 点击"日志"标签页
2. 查看执行日志
3. 日志按级别颜色编码：
   - 信息: 默认颜色
   - 警告: 橙色
   - 错误: 红色
   - 成功: 绿色
4. 自动滚动到最新日志

### 查看结果

1. 点击"结果"标签页
2. 查看任务执行结果
3. 每个结果显示：
   - 任务名称
   - 结果类型徽章
   - 时间戳
   - 结果内容（JSON 格式化）
4. 自动滚动到最新结果

## 5. 动画效果

### 节点动画

**空闲状态**
- 静态显示
- 悬停时放大和上移

**运行中状态**
- 节点脉冲动画
- 图标旋转动画
- 底部进度条动画
- 状态指示器脉冲
- 边框发光效果

**成功状态**
- 弹出缩放动画
- 绿色发光效果

**错误状态**
- 抖动动画
- 红色发光效果

### 连接线动画

**静态连接线**
- 青色实线
- 绘制动画

**活动连接线**
- 橙色虚线
- 流动动画
- 粒子流动效果

**条件连接线**
- 紫色虚线
- 静态显示

### 面板动画

**节点库**
- 从左侧滑入
- 节点逐项淡入
- 分类展开/收起动画

**控制面板**
- 按钮悬停放大
- 按钮点击缩小
- 日志/结果逐项淡入

## 6. 响应式设计

### 桌面端 (>1024px)

- 完整三栏布局
- 节点库: 280px
- 控制面板: 320px
- 画布: 自适应

### 平板端 (768px - 1024px)

- 节点库: 240px
- 控制面板: 280px
- 画布: 自适应

### 移动端 (<768px)

- 节点库和控制面板变为浮动面板
- 通过工具栏按钮切换显示
- 画布全屏显示

## 7. 键盘快捷键（建议）

虽然当前版本未实现，但建议的快捷键：

- `Ctrl/Cmd + S`: 保存工作流
- `Ctrl/Cmd + Z`: 撤销
- `Ctrl/Cmd + Y`: 重做
- `Delete`: 删除选中节点
- `Ctrl/Cmd + A`: 全选节点
- `Ctrl/Cmd + C`: 复制节点
- `Ctrl/Cmd + V`: 粘贴节点
- `Space`: 切换节点库显示

## 8. 最佳实践

### 组织工作流

1. **使用分类颜色**: 利用节点颜色快速识别类型
2. **合理命名**: 双击节点修改名称
3. **添加注释**: 使用描述字段记录重要信息
4. **定期保存**: 注意未保存徽章提示

### 调试工作流

1. **查看日志**: 实时监控执行过程
2. **检查结果**: 验证每个任务的输出
3. **观察动画**: 通过节点状态动画了解执行进度
4. **错误处理**: 红色节点表示错误，查看日志获取详情

### 性能优化

1. **避免过多节点**: 建议单个工作流不超过 50 个节点
2. **清理日志**: 定期清空日志避免内存占用
3. **使用搜索**: 大量节点时使用搜索快速定位

## 9. 常见问题

### Q: 节点库不显示？
A: 点击画布左侧的工具栏按钮打开节点库。

### Q: 节点拖不动？
A: 确保从节点库拖拽，而不是从画布上的节点。

### Q: 连接线无法创建？
A: 确保从源节点底部拖到目标节点顶部。

### Q: 动画卡顿？
A: 检查浏览器性能，建议使用 Chrome 或 Edge。

### Q: 保存按钮一直是橙色？
A: 表示有未保存的更改，点击保存按钮保存工作流。

### Q: 日志太多看不清？
A: 使用滚动条或清空日志，日志会自动滚动到最新。

## 10. 进阶技巧

### 自定义节点样式

```typescript
import { getNodeStyle } from '@/lib/workflow/designSystem';

const customStyle = getNodeStyle('ai', 'running', 'large');
```

### 创建自定义动画

```typescript
import { applyAnimation } from '@/lib/workflow/animations';

applyAnimation(element, 'bounce', 500);
```

### 使用涟漪效果

```typescript
import { createRipple } from '@/lib/workflow/animations';

<button onClick={createRipple}>
  点击我
</button>
```

## 11. 相关资源

- [完整文档](./WORKFLOW_UI_UX_ENHANCEMENT_COMPLETE.md)
- [设计系统](./lib/workflow/designSystem.ts)
- [动画系统](./lib/workflow/animations.ts)
- [工作流引擎](./lib/workflowEngine.ts)

## 12. 反馈和支持

如有问题或建议，请：
1. 查看日志获取错误信息
2. 检查浏览器控制台
3. 参考完整文档
4. 联系开发团队

---

**享受全新的工作流编辑体验！** 🎉
