# 认证修复 - 用户指南

## 修复内容

本次修复解决了以下问题：

### ✅ 已修复的功能

1. **个人资料更新** - 现在可以正常更新用户名称
2. **密码修改** - 现在可以正常修改密码
3. **头像上传** - 现在可以正常上传和更新头像

### 🔧 技术改进

- 统一了认证机制，使用 Cookie 认证
- 移除了对 Bearer Token 的依赖
- 简化了前端代码
- 提高了安全性

## 使用说明

### 1. 登录系统

访问登录页面并输入您的邮箱：

```
http://localhost:3000/login
```

默认管理员账户：
- 邮箱：`admin@drone.com`
- 密码：`admin123`

### 2. 访问设置页面

登录后，点击右上角的用户菜单，选择"设置"：

```
http://localhost:3000/settings
```

### 3. 更新个人信息

在设置页面的"个人信息"标签中：

1. 输入您的姓名
2. 点击"保存更改"按钮
3. 等待成功提示

### 4. 修改密码

在设置页面的"安全设置"标签中：

1. 输入当前密码
2. 输入新密码（至少 6 位）
3. 确认新密码
4. 点击"修改密码"按钮
5. 等待成功提示

### 5. 上传头像

在设置页面的"个人信息"标签中：

1. 点击头像区域的"上传头像"按钮
2. 选择图片文件（支持 JPG、PNG、GIF、WebP）
3. 文件大小不超过 2MB
4. 等待上传完成
5. 头像会自动更新

## 常见问题

### Q: 为什么我无法更新个人信息？

**A:** 请确保：
1. 您已经登录系统
2. 浏览器允许 Cookie
3. 没有使用隐私模式/无痕模式

### Q: 上传头像失败怎么办？

**A:** 请检查：
1. 图片格式是否正确（JPG、PNG、GIF、WebP）
2. 文件大小是否小于 2MB
3. 网络连接是否正常

### Q: 修改密码后需要重新登录吗？

**A:** 不需要。修改密码后您的当前会话仍然有效。

### Q: 如果忘记密码怎么办？

**A:** 目前系统还没有密码重置功能。请联系管理员重置密码。

## 浏览器兼容性

本系统支持以下浏览器：

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

## 安全提示

1. **定期修改密码**：建议每 3-6 个月修改一次密码
2. **使用强密码**：密码应包含字母、数字和特殊字符
3. **不要共享账户**：每个用户应使用自己的账户
4. **及时退出登录**：使用公共设备后请及时退出

## 技术支持

如果您遇到任何问题，请：

1. 查看浏览器控制台的错误信息
2. 检查网络连接
3. 清除浏览器缓存和 Cookie
4. 联系技术支持团队

## 更新日志

### 2024-01-XX

- ✅ 修复个人资料更新功能
- ✅ 修复密码修改功能
- ✅ 修复头像上传功能
- ✅ 统一认证机制为 Cookie 认证
- ✅ 提高系统安全性
