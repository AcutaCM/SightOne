# 使用统计功能可视化指南

## 📊 界面预览

### 统计页面布局

```
┌─────────────────────────────────────────────────────────────┐
│  使用统计                                                    │
│  查看助理的使用情况、性能指标和常用命令                      │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 选择助理: [🚁 Tello智能代理 ▼]                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 使用统计                    [最近7天 ▼] [导出数据]  │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │ [概览] [常用命令] [性能]                            │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │                                                       │   │
│  │  总使用次数                                    156   │   │
│  │  ┌─────────────────────────────────────────┐       │   │
│  │  │ 成功 142  │  失败 14                     │       │   │
│  │  └─────────────────────────────────────────┘       │   │
│  │                                                       │   │
│  │  成功率                                    91.0%    │   │
│  │  ████████████████████████████████░░░░░░░░░         │   │
│  │                                                       │   │
│  │  首次使用: 2024-01-15    最后使用: 2024-01-22     │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## 🎨 选项卡详解

### 1. 概览选项卡

```
┌─────────────────────────────────────────────────────────┐
│ 总使用次数                                        156   │
│ ┌─────────────────────────────────────────────────┐   │
│ │ ✅ 成功 142  │  ❌ 失败 14                      │   │
│ └─────────────────────────────────────────────────┘   │
│                                                         │
│ 成功率                                          91.0%  │
│ ████████████████████████████████████░░░░░░░░░         │
│                                                         │
│ ┌──────────────────────┬──────────────────────┐       │
│ │ 首次使用             │ 最后使用             │       │
│ │ 2024-01-15          │ 2024-01-22          │       │
│ └──────────────────────┴──────────────────────┘       │
└─────────────────────────────────────────────────────────┘
```

**显示内容**:
- 总使用次数及成功/失败分布
- 成功率百分比和进度条
- 首次使用和最后使用时间

**颜色编码**:
- 🟢 绿色: 成功率 ≥ 80%
- 🟡 黄色: 成功率 60-80%
- 🔴 红色: 成功率 < 60%

### 2. 常用命令选项卡

```
┌─────────────────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────────────┐   │
│ │ 起飞并向前飞50厘米                               │   │
│ │ 使用 45次  ✅ 成功 43  ❌ 失败 2                │   │
│ │                                  平均响应: 1250ms│   │
│ │ ████████████████████████████████████████░░░░░   │   │
│ └─────────────────────────────────────────────────┘   │
│                                                         │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 起飞                                             │   │
│ │ 使用 38次  ✅ 成功 38  ❌ 失败 0                │   │
│ │                                  平均响应: 980ms │   │
│ │ ████████████████████████████████████████████████│   │
│ └─────────────────────────────────────────────────┘   │
│                                                         │
│ ┌─────────────────────────────────────────────────┐   │
│ │ 降落                                             │   │
│ │ 使用 35次  ✅ 成功 34  ❌ 失败 1                │   │
│ │                                  平均响应: 850ms │   │
│ │ ████████████████████████████████████████████░░░ │   │
│ └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

**显示内容**:
- 命令文本
- 使用次数
- 成功/失败次数
- 平均响应时间
- 成功率进度条

**排序规则**:
- 按使用次数降序排列
- 最多显示前10个命令

### 3. 性能选项卡

```
┌─────────────────────────────────────────────────────────┐
│ 平均响应时间                                    1150ms  │
│                                                         │
│ 最快: 650ms                          最慢: 3200ms     │
│                                                         │
│ 性能评级                                               │
│                                                         │
│ 响应速度                                          85%  │
│ ████████████████████████████████████████░░░░░░░       │
│                                                         │
│ 稳定性                                            78%  │
│ ████████████████████████████████████░░░░░░░░░░       │
│                                                         │
│ 可靠性                                            91%  │
│ ████████████████████████████████████████░░░░░░       │
└─────────────────────────────────────────────────────────┘
```

**显示内容**:
- 平均响应时间
- 最快/最慢响应时间
- 三个性能评分:
  - 响应速度评分
  - 稳定性评分
  - 可靠性评分

**评分标准**:

#### 响应速度
- 🟢 优秀 (90-100分): < 2秒
- 🟡 良好 (60-90分): 2-5秒
- 🔴 需改进 (< 60分): > 5秒

#### 稳定性
- 🟢 稳定 (85-100分): 变异系数 < 1.0
- 🟡 一般 (55-85分): 变异系数 1.0-3.0
- 🔴 不稳定 (< 55分): 变异系数 > 3.0

#### 可靠性
- 🟢 可靠 (80-100分): 成功率 ≥ 80%
- 🟡 一般 (60-80分): 成功率 60-80%
- 🔴 需改进 (< 60分): 成功率 < 60%

## 🎛️ 控制元素

### 时间范围选择器

```
┌──────────────┐
│ 最近7天  ▼  │
├──────────────┤
│ 今天         │
│ 最近7天  ✓  │
│ 最近30天     │
│ 全部         │
└──────────────┘
```

**选项说明**:
- **今天**: 当天的统计数据
- **最近7天**: 过去一周的数据（默认）
- **最近30天**: 过去一个月的数据
- **全部**: 所有历史数据

### 导出按钮

```
┌──────────────┐
│  导出数据    │
└──────────────┘
```

**功能**:
- 点击导出JSON格式的统计数据
- 包含聚合统计和详细执行记录
- 文件名格式: `usage-stats-{assistantId}-{timestamp}.json`

## 📱 响应式设计

### 桌面视图 (≥ 1024px)

```
┌─────────────────────────────────────────────────────────┐
│  [选择助理]                                             │
│  ┌───────────────────────────────────────────────────┐ │
│  │ 使用统计                  [时间范围] [导出]       │ │
│  │ [概览] [常用命令] [性能]                          │ │
│  │                                                    │ │
│  │  [统计内容区域 - 全宽显示]                        │ │
│  │                                                    │ │
│  └───────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

### 平板视图 (768px - 1024px)

```
┌─────────────────────────────────────────┐
│  [选择助理]                             │
│  ┌─────────────────────────────────┐   │
│  │ 使用统计    [时间] [导出]       │   │
│  │ [概览] [命令] [性能]            │   │
│  │                                  │   │
│  │  [统计内容 - 适应宽度]          │   │
│  │                                  │   │
│  └─────────────────────────────────┘   │
└─────────────────────────────────────────┘
```

### 移动视图 (< 768px)

```
┌─────────────────────────┐
│  [选择助理]             │
│  ┌─────────────────┐   │
│  │ 使用统计        │   │
│  │ [时间▼] [导出]  │   │
│  │ [概览]          │   │
│  │ [命令]          │   │
│  │ [性能]          │   │
│  │                 │   │
│  │ [统计内容]      │   │
│  │ [垂直堆叠]      │   │
│  │                 │   │
│  └─────────────────┘   │
└─────────────────────────┘
```

## 🎭 状态展示

### 加载状态

```
┌─────────────────────────────────────┐
│                                     │
│         ⟳ 加载中...                │
│                                     │
│      加载统计数据...                │
│                                     │
└─────────────────────────────────────┘
```

### 错误状态

```
┌─────────────────────────────────────┐
│                                     │
│         ⚠️ 加载统计数据失败         │
│                                     │
│         [重试]                      │
│                                     │
└─────────────────────────────────────┘
```

### 空数据状态

```
┌─────────────────────────────────────┐
│                                     │
│         📊 暂无统计数据             │
│                                     │
│    开始使用助理后将显示统计信息     │
│                                     │
└─────────────────────────────────────┘
```

## 🎨 颜色方案

### 亮色主题

```
背景色: #FFFFFF
卡片背景: #F9FAFB
文字主色: #1F2937
文字次色: #6B7280
边框色: #E5E7EB

成功色: #10B981 (绿色)
警告色: #F59E0B (黄色)
错误色: #EF4444 (红色)
主色调: #3B82F6 (蓝色)
```

### 暗色主题

```
背景色: #111827
卡片背景: #1F2937
文字主色: #F9FAFB
文字次色: #9CA3AF
边框色: #374151

成功色: #34D399 (绿色)
警告色: #FBBF24 (黄色)
错误色: #F87171 (红色)
主色调: #60A5FA (蓝色)
```

## 🔄 交互流程

### 查看统计流程

```
用户访问 /stats
    ↓
加载助理列表
    ↓
选择助理 (默认: Tello智能代理)
    ↓
加载统计数据 (默认: 最近7天)
    ↓
显示概览选项卡
    ↓
用户可以:
├─ 切换选项卡 (概览/命令/性能)
├─ 更改时间范围
├─ 导出数据
└─ 刷新数据
```

### 数据记录流程

```
用户执行命令
    ↓
记录开始时间
    ↓
执行命令
    ↓
计算响应时间
    ↓
记录执行结果
    ↓
异步更新聚合统计
    ↓
UI自动刷新 (如果正在查看)
```

## 📐 布局尺寸

### 卡片尺寸
- 最小宽度: 320px
- 最大宽度: 1200px
- 内边距: 24px
- 圆角: 12px

### 进度条
- 高度: 8px
- 圆角: 4px
- 动画: 0.3s ease

### 按钮
- 高度: 36px (sm)
- 内边距: 12px 16px
- 圆角: 8px

### 选项卡
- 高度: 48px
- 内边距: 12px 24px
- 激活指示器: 2px 底部边框

## 🎯 用户体验要点

1. **即时反馈**: 所有操作都有加载状态
2. **清晰的视觉层次**: 使用大小、颜色区分重要性
3. **一致的交互**: 所有按钮和控件遵循相同模式
4. **响应式设计**: 适配所有设备尺寸
5. **无障碍支持**: 键盘导航和屏幕阅读器支持

## 🚀 快速访问

- 统计页面: `/stats`
- 组件导入: `import { UsageStatsPanel } from '@/components/UsageStatsPanel'`
- Hook导入: `import { useUsageStats } from '@/hooks/useUsageStats'`

## 📚 相关文档

- [使用指南](./USAGE_STATS_GUIDE.md)
- [快速参考](./USAGE_STATS_QUICK_REFERENCE.md)
- [实现总结](./USAGE_STATS_IMPLEMENTATION_SUMMARY.md)
