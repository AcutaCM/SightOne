# Workflow UI Visual Guide

## 视觉设计指南

本文档提供工作流 UI 的视觉设计说明和使用示例。

## 1. 整体布局

```
┌─────────────────────────────────────────────────────────────────┐
│                        顶部导航栏                                 │
├──────────┬──────────────────────────────────────────┬───────────┤
│          │                                          │           │
│  节点库  │              工作流画布                    │  控制面板 │
│  280px   │              (自适应)                     │  320px    │
│          │                                          │           │
│  [搜索]  │  ┌────┐      ┌────┐      ┌────┐        │  [状态]   │
│          │  │开始│─────→│起飞│─────→│移动│        │           │
│  流程▼   │  └────┘      └────┘      └────┘        │  [按钮]   │
│  ○ 开始  │       │           │           │          │           │
│  ● 结束  │       ↓           ↓           ↓          │  [日志]   │
│          │  ┌────┐      ┌────┐      ┌────┐        │           │
│  基础▼   │  │检测│      │分析│      │降落│        │  [结果]   │
│  ✈ 起飞  │  └────┘      └────┘      └────┘        │           │
│  ⬇ 降落  │       │           │           │          │           │
│          │       └───────────┴──────────→┌────┐    │           │
│  移动▶   │                              │结束│    │           │
│          │                              └────┘    │           │
│  [更多]  │                                          │           │
│          │                                          │           │
└──────────┴──────────────────────────────────────────┴───────────┘
```

## 2. 颜色系统

### 节点类别颜色

```
┌─────────────────┬──────────┬─────────────────────┐
│ 类别            │ 颜色     │ 示例节点            │
├─────────────────┼──────────┼─────────────────────┤
│ 流程控制 (flow) │ #64FFDA  │ ○ 开始  ● 结束     │
│ 基础控制 (basic)│ #4A90E2  │ ✈ 起飞  ⬇ 降落     │
│ 移动控制 (move) │ #10B981  │ ↑ 前进  ← 左移     │
│ 旋转控制 (rot)  │ #8B5CF6  │ ↻ 顺转  ↺ 逆转     │
│ 特技动作 (trick)│ #F59E0B  │ ⟲ 翻转  ⚡ 特技     │
│ 检测任务 (det)  │ #EC4899  │ 📷 QR码  🍓 草莓    │
│ AI分析 (ai)     │ #A855F7  │ 🧠 分析  👁 识别    │
│ 逻辑判断 (logic)│ #EF4444  │ ⚡ 条件  🔀 分支    │
│ 数据处理 (data) │ #3B82F6  │ 💾 存储  🔄 转换    │
│ 挑战任务 (chal) │ #F59E0B  │ 🎯 8字   🚁 穿越    │
└─────────────────┴──────────┴─────────────────────┘
```

### 节点状态颜色

```
┌──────────┬──────────┬────────────────────────┐
│ 状态     │ 颜色     │ 视觉效果               │
├──────────┼──────────┼────────────────────────┤
│ 空闲     │ #6B7280  │ 静态显示               │
│ 运行中   │ #F59E0B  │ 脉冲 + 发光 + 进度条   │
│ 成功     │ #10B981  │ 弹出 + 绿色发光        │
│ 错误     │ #EF4444  │ 抖动 + 红色发光        │
│ 跳过     │ #8B5CF6  │ 紫色边框               │
│ 等待     │ #06B6D4  │ 青色边框               │
└──────────┴──────────┴────────────────────────┘
```

## 3. 节点设计

### 节点结构

```
┌─────────────────────────────────┐
│  ┌─────────────────────────┐ ● │  ← 状态指示器
│  │  🎯 节点图标  节点名称   │   │
│  └─────────────────────────┘   │
│  node_type                      │  ← 节点类型
│  ─────────────────────────────  │
│  3 个参数                       │  ← 参数预览
│  ═══════════════════════════    │  ← 进度条(运行时)
└─────────────────────────────────┘
   ↑                           ↑
  输入点                      输出点
```

### 节点尺寸

```
┌──────────┬────────┬──────────┬──────────┐
│ 尺寸     │ 宽度   │ 高度     │ 用途     │
├──────────┼────────┼──────────┼──────────┤
│ Compact  │ 140px  │ 50px     │ 简单节点 │
│ Default  │ 180px  │ 60px     │ 标准节点 │
│ Large    │ 220px  │ 80px     │ 复杂节点 │
└──────────┴────────┴──────────┴──────────┘
```

### 节点状态动画

```
空闲状态:
┌────────┐
│  节点  │  静态
└────────┘

运行中状态:
┌────────┐
│  节点  │  ← 脉冲动画 (1.5s 循环)
└────────┘
│  图标  │  ← 旋转动画 (2s 循环)
└────────┘
═══════    ← 进度条动画 (2s 循环)

成功状态:
┌────────┐
│  节点  │  ← 弹出动画 (0.5s 一次)
└────────┘
   ✓      ← 绿色发光

错误状态:
┌────────┐
│  节点  │  ← 抖动动画 (0.5s 一次)
└────────┘
   ✗      ← 红色发光
```

## 4. 连接线设计

### 连接线类型

```
静态连接线:
节点A ────────────→ 节点B
      (青色实线)

活动连接线:
节点A ─ ─ ─ ─ ─ ─→ 节点B
      (橙色虚线 + 流动动画)
      ● ● ●  (粒子流动)

条件连接线:
节点A ┈┈┈┈┈┈┈┈┈→ 节点B
      (紫色虚线)
      [条件]  (标签)
```

### 连接线动画

```
绘制动画 (0.5s):
节点A ─           节点B
节点A ───         节点B
节点A ─────       节点B
节点A ───────→    节点B

流动动画 (循环):
节点A ─ ─ ─ ─ ─→  节点B
      ●
节点A ─ ─ ─ ─ ─→  节点B
        ●
节点A ─ ─ ─ ─ ─→  节点B
          ●
```

## 5. 节点库设计

### 节点库结构

```
┌─────────────────────────────┐
│  节点库                      │
│  ┌─────────────────────┐   │
│  │ 🔍 搜索节点...      │   │
│  └─────────────────────┘   │
│                             │
│  ▼ 流程控制 (2)             │  ← 可展开分类
│    ┌───────────────────┐   │
│    │ ○ 开始            │   │  ← 节点项
│    │ 工作流开始节点     │   │
│    └───────────────────┘   │
│    ┌───────────────────┐   │
│    │ ● 结束            │   │
│    │ 工作流结束节点     │   │
│    └───────────────────┘   │
│                             │
│  ▶ 基础控制 (5)             │  ← 折叠分类
│                             │
│  ▼ 移动控制 (6)             │
│    ┌───────────────────┐   │
│    │ ↑ 前进            │   │
│    │ 向前移动指定距离   │   │
│    └───────────────────┘   │
│    ...                      │
│                             │
│  ─────────────────────────  │
│  显示 15 个节点  共 50 个   │  ← 统计信息
└─────────────────────────────┘
```

### 节点项设计

```
┌─────────────────────────────────┐
│ │ 🎯  节点名称                   │  ← 左侧颜色条
│ │     节点描述说明               │
└─────────────────────────────────┘
  ↑   ↑
 颜色 图标

悬停效果:
┌─────────────────────────────────┐
│ │ 🎯  节点名称                   │  ← 放大 + 右移
│ │     节点描述说明               │
└─────────────────────────────────┘
  ↑
 发光
```

## 6. 控制面板设计

### 控制面板结构

```
┌─────────────────────────────┐
│  控制面板                    │
│                             │
│  无人机: ● 已连接           │  ← 状态显示
│  WebSocket: ● 在线          │
│                             │
│  ┌─────────────────────┐   │
│  │ ▶ 运行工作流        │   │  ← 控制按钮
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ ■ 停止              │   │
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ ✨ AI生成工作流     │   │
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ 💾 保存工作流 ●     │   │  ← 未保存徽章
│  └─────────────────────┘   │
│  ┌──────────┬──────────┐   │
│  │ 📁 加载  │ 🗑 清空  │   │
│  └──────────┴──────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 📝 日志 │ 📊 结果   │   │  ← 标签页
│  ├─────────────────────┤   │
│  │                     │   │
│  │  [日志内容]         │   │  ← 内容区域
│  │                     │   │
│  │                     │   │
│  └─────────────────────┘   │
└─────────────────────────────┘
```

### 日志项设计

```
┌─────────────────────────────────┐
│ │ ℹ️  12:34:56                   │  ← 信息日志
│ │    系统初始化完成              │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│ │ ⚠️  12:35:10                   │  ← 警告日志
│ │    电池电量低于 30%            │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│ │ ❌  12:35:20                   │  ← 错误日志
│ │    连接超时                    │
└─────────────────────────────────┘

┌─────────────────────────────────┐
│ │ ✅  12:35:30                   │  ← 成功日志
│ │    任务执行完成                │
└─────────────────────────────────┘
```

### 结果项设计

```
┌─────────────────────────────────┐
│  QR码扫描 ┃ [QR]                │  ← 标题 + 类型徽章
│  🕐 12:34:56                     │  ← 时间戳
│  ─────────────────────────────  │
│  {                               │  ← JSON 结果
│    "content": "ABC123",          │
│    "position": [100, 200]        │
│  }                               │
└─────────────────────────────────┘
```

## 7. 按钮设计

### 按钮状态

```
正常状态:
┌─────────────────┐
│ ▶ 运行工作流    │
└─────────────────┘

悬停状态:
┌─────────────────┐
│ ▶ 运行工作流    │  ← 放大 + 阴影
└─────────────────┘

点击状态:
┌─────────────────┐
│ ▶ 运行工作流    │  ← 缩小
└─────────────────┘

禁用状态:
┌─────────────────┐
│ ▶ 运行工作流    │  ← 半透明
└─────────────────┘
```

### 按钮颜色

```
运行按钮:  绿色渐变 (#10B981 → #059669)
停止按钮:  红色渐变 (#EF4444 → #DC2626)
AI按钮:    紫色渐变 (#8B5CF6 → #7C3AED)
保存按钮:  蓝色渐变 (#3B82F6 → #2563EB)
未保存:    橙色渐变 (#F59E0B → #D97706) + 脉冲
```

## 8. 响应式设计

### 桌面端 (>1024px)

```
┌────────┬──────────────────┬────────┐
│ 节点库 │      画布        │ 控制   │
│ 280px  │    (自适应)      │ 320px  │
└────────┴──────────────────┴────────┘
```

### 平板端 (768px - 1024px)

```
┌──────┬────────────────────┬──────┐
│ 节点 │       画布         │ 控制 │
│ 240px│    (自适应)        │ 280px│
└──────┴────────────────────┴──────┘
```

### 移动端 (<768px)

```
画布全屏:
┌──────────────────────────────────┐
│                                  │
│            画布                  │
│                                  │
└──────────────────────────────────┘

节点库浮动:
┌──────────┐
│ 节点库   │  ← 从左侧滑入
│          │
│          │
└──────────┘

控制面板浮动:
              ┌──────────┐
              │ 控制面板 │  ← 从右侧滑入
              │          │
              │          │
              └──────────┘
```

## 9. 动画时序

### 节点添加动画

```
时间轴:
0ms    ─────  节点开始拖拽
       │
100ms  ─────  节点跟随鼠标
       │
200ms  ─────  释放鼠标
       │
250ms  ─────  节点淡入 (opacity: 0 → 1)
       │
500ms  ─────  节点完全显示
```

### 工作流执行动画

```
时间轴:
0ms    ─────  点击运行按钮
       │
100ms  ─────  按钮缩小反馈
       │
200ms  ─────  开始节点变为运行中
       │      (脉冲动画开始)
       │
1000ms ─────  开始节点变为成功
       │      (弹出动画)
       │
1100ms ─────  连接线开始流动
       │
1200ms ─────  下一个节点变为运行中
       │
...    ─────  继续执行
```

### 面板切换动画

```
时间轴:
0ms    ─────  点击标签页
       │
50ms   ─────  当前内容淡出
       │
150ms  ─────  新内容淡入
       │
200ms  ─────  列表项逐个显示
       │      (每项延迟 50ms)
       │
500ms  ─────  所有内容显示完成
```

## 10. 交互反馈

### 鼠标交互

```
悬停 (Hover):
- 节点: 放大 1.05x + 上移 2px
- 按钮: 放大 1.02x + 阴影增强
- 连接线: 加粗 + 颜色变亮

点击 (Click):
- 节点: 缩小 0.98x
- 按钮: 缩小 0.95x
- 涟漪效果扩散

拖拽 (Drag):
- 节点: 缩小 0.95x + 透明度 0.7
- 光标: grab → grabbing
```

### 状态反馈

```
成功:
✅ 绿色图标 + 绿色发光 + 弹出动画

警告:
⚠️ 橙色图标 + 橙色边框

错误:
❌ 红色图标 + 红色发光 + 抖动动画

加载:
⏳ 旋转动画 (1s 循环)

进度:
═══════ 进度条填充动画
```

## 11. 可访问性

### 颜色对比度

```
文本颜色:
- 主要文本: #E6F1FF (对比度 > 7:1)
- 次要文本: #94A3B8 (对比度 > 4.5:1)
- 禁用文本: #475569 (对比度 > 3:1)

背景颜色:
- 主背景: #0A192F
- 面板背景: #1E3A5F
- 卡片背景: #193059
```

### 焦点指示

```
键盘焦点:
┌─────────────────┐
│ ▶ 运行工作流    │  ← 蓝色外发光
└─────────────────┘
  outline: 2px solid #3B82F6
```

## 12. 性能优化

### 动画性能

```
使用 GPU 加速:
- transform: translateX/Y/Z
- opacity
- scale

避免:
- width/height 动画
- margin/padding 动画
- top/left 动画
```

### 渲染优化

```
虚拟滚动:
- 日志列表 > 100 项
- 结果列表 > 50 项

懒加载:
- 节点组件按需加载
- 图标按需导入
```

---

**通过这些视觉设计，工作流编辑器提供了专业、美观、易用的用户体验！** 🎨
