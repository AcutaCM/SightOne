# YOLO 模型管理器面板使用指南

## 概述

YOLO 模型管理器面板是一個可拖拽的浮動面板，允許您在主應用界面中直接管理和部署 YOLO 檢測模型，無需跳轉到單獨的頁面。

## 如何啟用面板

### 方式一：通過組件管理器（推薦）

1. 在主頁面右上角找到並點擊「組件管理器」按鈕
2. 在彈出的組件選擇器中，找到「分析」類別
3. 選擇「**YOLO 模型管理器**」
4. 面板會自動出現在頁面上
5. 您可以自由拖拽和調整面板大小

### 方式二：訪問獨立頁面

訪問 `http://localhost:3000/model-manager` 查看完整頁面版本（包含使用說明）

## 面板功能

### 1. 上傳模型
- 點擊「上傳模型」按鈕
- 選擇 `.pt` 格式的 YOLO 模型文件
- 系統會自動驗證並添加到模型列表

### 2. 查看模型列表
- 顯示所有已上傳的模型
- 查看模型大小、類型等信息
- 支持的模型類型：
  - 🍓 草莓成熟度檢測
  - 🦠 病害檢測
  - 🎯 通用目標檢測

### 3. 應用模型（實時檢測）
- 點擊模型卡片上的「應用」按鈕
- 系統會自動：
  1. 加載選中的模型
  2. 啟動 Tello 無人機視頻流
  3. 開始實時檢測
- 正在運行的模型會顯示綠色「檢測中」狀態

### 4. 查看檢測狀態
當檢測運行時，面板頂部會顯示：
- 🟢 檢測進行中指示器
- 當前使用的模型名稱
- 檢測類型
- 實時 FPS（幀率）
- 檢測到的目標數量

### 5. 停止檢測
- 點擊狀態區域的「停止」按鈕
- 檢測會立即停止

## 相關組件

該系統提供三個不同的模型管理組件：

1. **YOLO 模型管理器** (yolo-model-manager)
   - 完整功能的模型管理面板
   - 支持上傳、應用、查看狀態

2. **智能模型選擇器** (enhanced-model-selector)
   - 詳細的模型選擇界面
   - 適合需要更多信息的場景

3. **緊湊模型選擇器** (compact-model-selector)
   - 簡潔的工具欄版本
   - 適合快速切換模型

## 技術細節

### API 端點
- `POST /api/models/list` - 獲取模型列表
- `POST /api/models/upload` - 上傳模型
- `POST /api/models/apply` - 應用模型
- `POST /api/models/start-detection` - 啟動檢測
- `POST /api/models/stop-detection` - 停止檢測
- `GET /api/models/status` - 獲取檢測狀態

### 模型文件要求
- 格式：`.pt` (PyTorch 模型文件)
- 支持：YOLOv8、YOLOv11
- 推薦大小：< 100MB（以確保快速加載）

### 自動識別模型類型
系統會根據文件名自動識別模型類型：
- 包含 `disease` 或 `病害` → 病害檢測
- 包含 `best`、`成熟` 或 `maturity` → 成熟度檢測
- 其他 → 通用檢測

## 布局管理

### 拖拽面板
- 點擊面板頂部可拖拽移動
- 拖拽到放置區域可以固定位置

### 調整大小
- 拖拽面板邊緣可調整大小
- 默認大小：400x500 像素
- 最小/最大尺寸由系統自動限制

### 隱藏/顯示
- 再次點擊組件管理器中的「YOLO 模型管理器」可以切換顯示/隱藏
- 布局會自動保存，刷新後恢復

## 常見問題

### Q: 為什麼上傳失敗？
A: 請確保：
1. 文件格式為 `.pt`
2. 模型文件未損壞
3. 服務器有足夠的存儲空間

### Q: 檢測啟動失敗？
A: 請檢查：
1. Tello 無人機是否連接
2. Python 後端服務是否運行
3. 模型文件是否完整

### Q: 如何使用自定義模型？
A: 
1. 使用 YOLOv8/v11 訓練您的模型
2. 導出為 `.pt` 格式
3. 通過面板上傳
4. 點擊「應用」即可使用

## 更新日誌

- **v1.0** - 初始版本
  - 基本的模型上傳和應用功能
  - 實時檢測狀態顯示
  - 可拖拽面板支持

