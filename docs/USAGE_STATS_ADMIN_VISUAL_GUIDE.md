# 使用统计管理面板 - 可视化指南

## 界面布局

```
┌─────────────────────────────────────────────────────────────────┐
│  助理使用统计报告                    [时间范围▼] [导出] [刷新]  │
└─────────────────────────────────────────────────────────────────┘

┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│ 助理总数     │ │ 总使用次数   │ │ 整体成功率   │ │ 平均响应时间 │
│              │ │              │ │              │ │              │
│     10       │ │    1,234     │ │   85.5%      │ │   1,250ms    │
│              │ │ ✓ 1,056      │ │ ████████░░   │ │              │
│              │ │ ✗ 178        │ │              │ │              │
└──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘

┌─────────────────────────────────────────────────────────────────┐
│ [概览] [性能分析] [趋势图表] [详细数据]                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│  使用次数排行 Top 5                                              │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ #1  Tello智能代理        500次使用  90.5%成功  1,200ms  │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ #2  农业诊断专家         350次使用  88.2%成功  1,500ms  │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ #3  图像分析助手         280次使用  92.1%成功  1,100ms  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
```

## 选项卡详解

### 1. 概览选项卡

显示使用次数最多的前5个助理：

```
┌─────────────────────────────────────────────────────────────┐
│ 使用次数排行 Top 5                                          │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  🥇 #1  Tello智能代理                                        │
│         500次使用 | 90.5%成功率 | 1,200ms平均响应           │
│         ████████████████████████████████████████░░░░░░       │
│                                                               │
│  🥈 #2  农业诊断专家                                         │
│         350次使用 | 88.2%成功率 | 1,500ms平均响应           │
│         ████████████████████████░░░░░░░░░░░░░░░░░░░░         │
│                                                               │
│  🥉 #3  图像分析助手                                         │
│         280次使用 | 92.1%成功率 | 1,100ms平均响应           │
│         ████████████████████░░░░░░░░░░░░░░░░░░░░░░░         │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

**关键指标**:
- 排名徽章 (#1, #2, #3...)
- 使用次数
- 成功率百分比
- 平均响应时间

### 2. 性能分析选项卡

分三个部分展示性能数据：

```
┌─────────────────────────────────────────────────────────────┐
│ 响应最快的助理                                              │
├─────────────────────────────────────────────────────────────┤
│  图像分析助手                                    [800ms]    │
│  编程助手                                        [950ms]    │
│  翻译助手                                        [1,050ms]  │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 响应最慢的助理                                              │
├─────────────────────────────────────────────────────────────┤
│  创意设计师                                      [3,200ms]  │
│  数据分析师                                      [2,800ms]  │
│  农业诊断专家                                    [2,500ms]  │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 最可靠的助理（成功率）                                      │
├─────────────────────────────────────────────────────────────┤
│  图像分析助手                                    [95.5%]    │
│  编程助手                                        [93.2%]    │
│  Tello智能代理                                   [90.5%]    │
└─────────────────────────────────────────────────────────────┘
```

**颜色编码**:
- 🟢 绿色: 优秀性能
- 🟡 黄色: 良好性能
- 🔴 红色: 需要改进

### 3. 趋势图表选项卡

展示使用趋势和分布：

```
┌─────────────────────────────────────────────────────────────┐
│  总使用量          平均成功率         平均响应时间          │
│                                                               │
│    1,234            85.5%             1,250ms                │
│  最近7天          ████████░░          良好                   │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 使用量分布                                                  │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  Tello智能代理    ████████████████████████████████  500次   │
│  农业诊断专家     ████████████████████░░░░░░░░░░░  350次   │
│  图像分析助手     ███████████████░░░░░░░░░░░░░░░  280次   │
│  数据分析师       ████████████░░░░░░░░░░░░░░░░░░  220次   │
│  编程助手         ██████████░░░░░░░░░░░░░░░░░░░  180次   │
│  写作助手         ████████░░░░░░░░░░░░░░░░░░░░░  150次   │
│  翻译助手         ██████░░░░░░░░░░░░░░░░░░░░░░░  120次   │
│  教育辅导老师     ████░░░░░░░░░░░░░░░░░░░░░░░░░   80次   │
│  客服助手         ███░░░░░░░░░░░░░░░░░░░░░░░░░░   60次   │
│  创意设计师       ██░░░░░░░░░░░░░░░░░░░░░░░░░░░   40次   │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

**可视化元素**:
- 进度条显示相对使用量
- 具体数值标注
- 按使用量排序

### 4. 详细数据选项卡

完整的数据表格视图：

```
┌──────────────────────────────────────────────────────────────────────────┐
│ 助理ID          │ 使用次数    │ 成功率      │ 平均响应时间 │ 最后使用    │
├──────────────────────────────────────────────────────────────────────────┤
│ Tello智能代理   │ 500         │ 90.5%       │ 1,200ms      │ 2024-01-15  │
│                 │ ✓ 453       │ ████████░░  │              │             │
│                 │ ✗ 47        │             │              │             │
├──────────────────────────────────────────────────────────────────────────┤
│ 农业诊断专家    │ 350         │ 88.2%       │ 1,500ms      │ 2024-01-14  │
│                 │ ✓ 309       │ ████████░░  │              │             │
│                 │ ✗ 41        │             │              │             │
├──────────────────────────────────────────────────────────────────────────┤
│ 图像分析助手    │ 280         │ 92.1%       │ 1,100ms      │ 2024-01-15  │
│                 │ ✓ 258       │ █████████░  │              │             │
│                 │ ✗ 22        │             │              │             │
└──────────────────────────────────────────────────────────────────────────┘
```

**表格功能**:
- 可排序列
- 成功/失败次数细分
- 成功率进度条
- 最后使用日期

## 时间范围筛选

```
┌─────────────────┐
│ 时间范围 ▼      │
├─────────────────┤
│ ✓ 今天          │
│   最近7天       │
│   最近30天      │
│   全部时间      │
└─────────────────┘
```

**筛选效果**:
- 立即更新所有统计数据
- 保持当前选项卡
- 显示加载状态

## 数据导出

点击"导出全部数据"按钮后：

```json
{
  "globalSummary": {
    "totalAssistants": 10,
    "totalUses": 1234,
    "totalSuccessfulUses": 1056,
    "totalFailedUses": 178,
    "overallSuccessRate": 85.5,
    "avgResponseTime": 1250,
    "mostUsedAssistant": "tello-intelligent-agent",
    "leastUsedAssistant": "creative-designer"
  },
  "assistantStats": [
    {
      "assistantId": "tello-intelligent-agent",
      "totalUses": 500,
      "successfulUses": 453,
      "failedUses": 47,
      "successRate": 90.5,
      "avgResponseTime": 1200,
      "minResponseTime": 800,
      "maxResponseTime": 2500,
      "popularCommands": [...],
      "lastUsed": "2024-01-15T10:30:00Z",
      "firstUsed": "2024-01-01T08:00:00Z"
    }
    // ... 更多助理数据
  ],
  "timeRange": "week",
  "exportedAt": "2024-01-15T12:00:00Z"
}
```

## 响应式布局

### 桌面视图 (≥1024px)

```
┌─────────────────────────────────────────────────────────────┐
│  [摘要卡片1] [摘要卡片2] [摘要卡片3] [摘要卡片4]           │
└─────────────────────────────────────────────────────────────┘
```

### 平板视图 (768px - 1023px)

```
┌─────────────────────────────────┐
│  [摘要卡片1] [摘要卡片2]       │
│  [摘要卡片3] [摘要卡片4]       │
└─────────────────────────────────┘
```

### 移动视图 (<768px)

```
┌─────────────────┐
│  [摘要卡片1]    │
│  [摘要卡片2]    │
│  [摘要卡片3]    │
│  [摘要卡片4]    │
└─────────────────┘
```

## 状态指示

### 加载状态

```
┌─────────────────────────────────┐
│                                 │
│         ⏳ 加载中...            │
│      加载统计数据...            │
│                                 │
└─────────────────────────────────┘
```

### 错误状态

```
┌─────────────────────────────────┐
│                                 │
│         ❌ 错误                 │
│    加载统计数据失败             │
│                                 │
│        [重试按钮]               │
│                                 │
└─────────────────────────────────┘
```

### 空数据状态

```
┌─────────────────────────────────┐
│                                 │
│         📊                      │
│      暂无统计数据               │
│                                 │
└─────────────────────────────────┘
```

## 交互流程

### 查看统计流程

```
用户打开管理页面
    ↓
显示加载状态
    ↓
加载统计数据
    ↓
显示全局摘要
    ↓
显示默认选项卡（概览）
    ↓
用户可以：
  - 切换选项卡
  - 更改时间范围
  - 导出数据
  - 刷新数据
```

### 时间范围切换流程

```
用户点击时间范围下拉菜单
    ↓
显示选项列表
    ↓
用户选择新的时间范围
    ↓
显示加载状态
    ↓
重新加载数据
    ↓
更新所有显示内容
```

### 数据导出流程

```
用户点击"导出全部数据"
    ↓
生成 JSON 数据
    ↓
创建下载链接
    ↓
触发文件下载
    ↓
文件保存到本地
```

## 颜色方案

### 成功率颜色

- 🟢 **绿色** (≥80%): `color="success"`
- 🟡 **黄色** (60-79%): `color="warning"`
- 🔴 **红色** (<60%): `color="danger"`

### 响应时间颜色

- 🟢 **绿色** (<2000ms): 优秀
- 🟡 **黄色** (2000-5000ms): 良好
- 🔴 **红色** (>5000ms): 需改进

### 主题颜色

- **主色**: 蓝色 (`primary`)
- **成功**: 绿色 (`success`)
- **警告**: 黄色 (`warning`)
- **危险**: 红色 (`danger`)
- **默认**: 灰色 (`default`)

## 无障碍功能

- ✅ ARIA 标签
- ✅ 键盘导航
- ✅ 屏幕阅读器支持
- ✅ 高对比度模式
- ✅ 焦点指示器

## 性能优化

- ⚡ 懒加载选项卡内容
- ⚡ 虚拟滚动（大数据集）
- ⚡ 数据缓存（IndexedDB）
- ⚡ 防抖搜索和筛选
- ⚡ 按需渲染图表

## 浏览器支持

| 浏览器 | 最低版本 | 状态 |
|--------|----------|------|
| Chrome | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |

## 相关文档

- [实现指南](./USAGE_STATS_ADMIN_PANEL_GUIDE.md)
- [快速参考](./USAGE_STATS_ADMIN_QUICK_REFERENCE.md)
- [API 文档](./USAGE_STATS_API_REFERENCE.md)
