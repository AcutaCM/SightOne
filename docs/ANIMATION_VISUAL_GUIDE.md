# 动画效果视觉指南

## 节点动画效果

### 1. 节点悬停效果
```
初始状态:
┌─────────────────────┐
│  ✈️  起飞            │
│  高度: 100cm        │
│  速度: 50cm/s       │
└─────────────────────┘

悬停状态 (向上移动2px):
┌─────────────────────┐  ↑
│  ✈️  起飞            │  2px
│  高度: 100cm        │
│  速度: 50cm/s       │
└─────────────────────┘
```

### 2. 节点选中效果
```
未选中:
┌─────────────────────┐
│  ✈️  起飞            │
│  高度: 100cm        │
└─────────────────────┘

选中 (缩放1.02倍 + 蓝色光晕):
  ╔═══════════════════╗
  ║  ✈️  起飞          ║  ← 蓝色光晕
  ║  高度: 100cm      ║
  ╚═══════════════════╝
```

### 3. 折叠/展开动画
```
展开状态:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│  高度: 100cm        │  ← 参数区域
│  速度: 50cm/s       │
│  方向: 向上         │
└─────────────────────┘

折叠动画 (0.3秒):
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│  高度: 100cm        │  ← 逐渐收缩
│  速度: 50cm/s       │     透明度降低
└─────────────────────┘

折叠状态:
┌─────────────────────┐
│  ✈️  起飞    [3]  ▲ │  ← 显示参数数量徽章
└─────────────────────┘
```

## 参数编辑动画

### 1. 参数悬停效果
```
正常状态:
┌─────────────────────┐
│ 高度: 100cm         │
└─────────────────────┘

悬停状态 (向右移动2px + 背景变亮):
  ┌─────────────────────┐
  │ 高度: 100cm         │  ← 向右移动
  └─────────────────────┘
```

### 2. 进入编辑模式
```
显示模式:
┌─────────────────────┐
│ 高度: 100cm         │
└─────────────────────┘
        ↓ 点击
编辑模式 (蓝色边框 + 光晕):
╔═════════════════════╗
║ 高度: [100____]cm   ║  ← 输入框
╚═════════════════════╝
```

### 3. 保存成功动画
```
保存前:
┌─────────────────────┐
│ 高度: 150cm         │
└─────────────────────┘
        ↓ 保存
保存中 (0.6秒动画):
╔═════════════════════╗  ← 绿色边框闪烁
║ 高度: 150cm         ║     轻微缩放
╚═════════════════════╝
        ↓
保存后:
┌─────────────────────┐
│ 高度: 150cm         │
└─────────────────────┘
```

### 4. 错误提示动画
```
正常状态:
┌─────────────────────┐
│ 高度: abc           │
└─────────────────────┘
        ↓ 验证失败
错误状态 (滑入动画):
┌─────────────────────┐
│ 高度: abc           │
│ ⚠️ 必须是有效的数字 │  ← 从上方滑入
└─────────────────────┘
```

## 状态指示器动画

### 1. 空闲状态
```
●  灰色圆点
   静止不动
```

### 2. 运行状态
```
时间轴: 0s ────── 0.75s ────── 1.5s
        ●         ◉           ●
      (小)      (大+淡)      (小)

外层光晕:
        ○         ⊙           ○
      (小)    (大+消失)     (小)

无限循环
```

### 3. 成功状态
```
●  绿色圆点
   单次缩放动画
   ● → ◉ → ●
```

### 4. 错误状态
```
●  红色圆点
   快速闪烁3次
   ● → ◉ → ● → ◉ → ● → ◉ → ●
```

## 进度条动画

### 运行中的进度条
```
时间轴: 0s ────── 1s ────── 2s
        
┌─────────────────────┐
│                     │
│                     │
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  ← 从左到右滑动
        ↓
┌─────────────────────┐
│                     │
│                     │
        ▓▓▓▓▓▓▓▓▓▓▓▓▓  ← 继续滑动
        ↓
┌─────────────────────┐
│                     │
│                     │
                    ▓  ← 到达右侧后从左侧重新开始

无限循环，2秒一个周期
```

## 按钮交互动画

### 1. 悬停效果
```
正常:
┌────┐
│ ⚙️ │
└────┘

悬停 (缩放1.1倍 + 背景变亮):
┌──────┐
│  ⚙️  │  ← 放大
└──────┘
```

### 2. 点击效果
```
悬停:
┌──────┐
│  ⚙️  │
└──────┘
    ↓ 点击
按下 (缩放0.95倍):
┌────┐
│ ⚙️ │  ← 缩小
└────┘
    ↓ 释放
恢复:
┌──────┐
│  ⚙️  │
└──────┘
```

### 3. 折叠按钮旋转
```
展开状态:
┌────┐
│ ▼  │
└────┘
    ↓ 点击 (0.3秒旋转180度)
折叠状态:
┌────┐
│ ▲  │
└────┘
```

## 徽章动画

### 参数数量徽章
```
展开 → 折叠:

展开时 (徽章隐藏):
┌─────────────────────┐
│  ✈️  起飞        ▼  │
└─────────────────────┘

折叠动画 (徽章弹出):
┌─────────────────────┐
│  ✈️  起飞    [3]  ▲ │  ← 从0缩放到1
└─────────────────────┘
```

### 错误警告图标
```
无错误:
┌─────────────────────┐
│  ✈️  起飞            │
└─────────────────────┘

检测到错误 (弹簧动画):
┌─────────────────────┐
│  ✈️  起飞  ⚠️        │  ← 弹性弹出
└─────────────────────┘
```

## 组合动画效果

### 完整的参数编辑流程
```
1. 初始状态:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ 高度: 100cm         │
│ 速度: 50cm/s        │
└─────────────────────┘

2. 悬停参数:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│   高度: 100cm       │  ← 向右移动 + 背景变亮
│ 速度: 50cm/s        │
└─────────────────────┘

3. 点击进入编辑:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ ╔═══════════════╗   │  ← 蓝色边框 + 光晕
│ ║高度: [150__]cm║   │
│ ╚═══════════════╝   │
│ 速度: 50cm/s        │
└─────────────────────┘

4. 保存成功:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ ╔═══════════════╗   │  ← 绿色闪烁
│ ║高度: 150cm    ║   │     轻微缩放
│ ╚═══════════════╝   │
│ 速度: 50cm/s        │
└─────────────────────┘

5. 完成:
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ 高度: 150cm         │  ← 恢复正常
│ 速度: 50cm/s        │
└─────────────────────┘
```

### 节点执行流程动画
```
1. 空闲状态:
┌─────────────────────┐
│  ✈️  起飞        ▼ ●│  ← 灰色指示器
├─────────────────────┤
│ 高度: 100cm         │
└─────────────────────┘

2. 开始执行:
┌─────────────────────┐
│  ✈️  起飞        ▼ ◉│  ← 橙色脉冲
├─────────────────────┤
│ 高度: 100cm         │
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  ← 进度条滑动
        ↓
┌─────────────────────┐
│  ✈️  起飞        ▼ ◉│  ← 持续脉冲
├─────────────────────┤
│ 高度: 100cm         │
        ▓▓▓▓▓▓▓▓▓▓▓▓▓  ← 进度条继续

3. 执行成功:
┌─────────────────────┐
│  ✈️  起飞        ▼ ●│  ← 绿色指示器
├─────────────────────┤  ← 单次缩放
│ 高度: 100cm         │
└─────────────────────┘

4. 执行失败:
┌─────────────────────┐
│  ✈️  起飞        ▼ ●│  ← 红色指示器
├─────────────────────┤  ← 快速闪烁
│ 高度: 100cm         │
│ ⚠️ 执行失败         │  ← 错误消息滑入
└─────────────────────┘
```

## 动画时间轴

### 快速交互 (0.15s - 0.2s)
- 按钮悬停
- 参数悬停
- 图标缩放

### 标准动画 (0.3s)
- 折叠/展开
- 图标旋转
- 边框颜色变化

### 慢速动画 (0.6s)
- 保存成功反馈
- 复杂状态转换

### 循环动画
- 运行状态脉冲: 1.5s
- 进度条滑动: 2s
- 光晕扩散: 2s

## 缓动曲线对比

### Standard [0.4, 0, 0.2, 1]
```
速度
 ▲
 │    ╱‾‾‾╲
 │   ╱     ╲
 │  ╱       ╲
 │ ╱         ╲
 └──────────────→ 时间
   慢→快→慢
   适用于大多数动画
```

### Accelerate [0.4, 0, 1, 1]
```
速度
 ▲
 │         ╱‾
 │       ╱
 │     ╱
 │   ╱
 └──────────────→ 时间
   慢→快
   适用于退出动画
```

### Decelerate [0, 0, 0.2, 1]
```
速度
 ▲
 │ ‾╲
 │   ╲
 │     ╲
 │       ╲
 └──────────────→ 时间
   快→慢
   适用于进入动画
```

### Spring (弹簧)
```
位置
 ▲
 │     ╱‾╲╱╲
 │    ╱    ╲
 │   ╱      ‾
 │  ╱
 └──────────────→ 时间
   弹性效果
   适用于弹出动画
```

## 性能优化可视化

### 使用Transform (✅ 推荐)
```
GPU层:
┌─────────────┐
│   节点内容   │  ← 独立GPU层
└─────────────┘  ← 硬件加速
     ↕️ 移动
┌─────────────┐
│   节点内容   │
└─────────────┘

性能: ⭐⭐⭐⭐⭐
```

### 使用Width/Height (❌ 不推荐)
```
重排重绘:
┌─────────────┐
│   节点内容   │  ← 触发重排
└─────────────┘
     ↕️ 改变大小
┌───────────────────┐
│   节点内容        │  ← 影响周围元素
└───────────────────┘

性能: ⭐⭐
```

## 主题对比

### 浅色主题
```
┌─────────────────────┐
│  ✈️  起飞        ▼  │  ← 白色背景
├─────────────────────┤  ← 蓝色边框
│ 高度: 100cm         │  ← 深色文本
│ 速度: 50cm/s        │
└─────────────────────┘
   柔和阴影
```

### 深色主题
```
┌─────────────────────┐
│  ✈️  起飞        ▼  │  ← 深蓝背景
├─────────────────────┤  ← 亮蓝边框
│ 高度: 100cm         │  ← 浅色文本
│ 速度: 50cm/s        │
└─────────────────────┘
   增强阴影 + 蓝色光晕
```

## 无障碍模式

### 正常动画
```
展开动画 (0.3秒):
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ 高度: 100cm         │  ← 平滑展开
│ 速度: 50cm/s        │     带透明度变化
└─────────────────────┘
```

### 减少动画模式
```
展开动画 (0秒):
┌─────────────────────┐
│  ✈️  起飞        ▼  │
├─────────────────────┤
│ 高度: 100cm         │  ← 立即显示
│ 速度: 50cm/s        │     无动画
└─────────────────────┘
```

## 动画调试

### 慢动作模式 (10倍慢速)
```tsx
// 在浏览器控制台执行:
document.documentElement.style.setProperty(
  '--animation-speed', 
  '10'
);

// 所有动画变为10倍慢速，便于调试
```

### 显示动画边界
```tsx
// 添加调试边框:
<motion.div
  style={{ 
    border: '2px dashed red',
    outline: '2px solid blue'
  }}
  animate={{ x: 100 }}
/>
```

## 总结

所有动画都遵循以下原则:
- ✅ 流畅自然 (60fps)
- ✅ 有意义的反馈
- ✅ 适当的持续时间
- ✅ 一致的缓动函数
- ✅ 性能优化
- ✅ 无障碍支持
