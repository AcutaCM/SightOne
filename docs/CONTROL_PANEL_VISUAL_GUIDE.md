# 控制面板视觉指南

## 整体布局

```
┌─────────────────────────────────────────────────────────┐
│  ControlPanelHeader                                     │
│  ┌───────────────────────────────────────────────────┐  │
│  │  控制面板                                          │  │
│  │                                                    │  │
│  │  🚁 无人机      [●] 已连接                        │  │
│  │  📡 WebSocket   [●] 已连接                        │  │
│  │                                                    │  │
│  │  最后更新: 刚刚                                    │  │
│  └───────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────┤
│  ActionButtons                                          │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ┌─────────────────────────────────────────────┐  │  │
│  │  │  ▶ 运行                                     │  │  │
│  │  └─────────────────────────────────────────────┘  │  │
│  │                                                    │  │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐         │  │
│  │  │ 💾 保存  │ │ 📥 加载  │ │ 🗑️ 清空  │         │  │
│  │  └──────────┘ └──────────┘ └──────────┘         │  │
│  │                                                    │  │
│  │  ┌─────────────────────────────────────────────┐  │  │
│  │  │  ✨ AI生成                                  │  │  │
│  │  └─────────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────┤
│  OutputTabs                                             │
│  ┌───────────────────────────────────────────────────┐  │
│  │  📋 日志 (5)  │  📊 结果 (2)                      │  │
│  │  ═══════════                                       │  │
│  ├───────────────────────────────────────────────────┤  │
│  │  LogList                                          │  │
│  │  ┌─────────────────────────────────────────────┐  │  │
│  │  │ 12:34:56.789  ℹ️  工作流开始执行           │  │  │
│  │  │ 12:34:57.123  ✓  节点执行成功  [node-1]    │  │  │
│  │  │ 12:34:58.456  ⚠️  警告信息                 │  │  │
│  │  │ 12:34:59.789  ❌  执行失败  [node-2]       │  │  │
│  │  │                                             │  │  │
│  │  │                                             │  │  │
│  │  └─────────────────────────────────────────────┘  │  │
│  │  ┌───────────────────────────────────────────────┐│  │
│  │  │  🗑️ 清空    📥 导出 ▼                        ││  │
│  │  └───────────────────────────────────────────────┘│  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

## 组件详细视图

### 1. ControlPanelHeader

```
┌─────────────────────────────────────────────────────────┐
│  控制面板                                                │
│                                                          │
│  ┌────┐                                                 │
│  │ 🚁 │  无人机          [已连接]                       │
│  └────┘                   ●●●●● (脉冲动画)              │
│                                                          │
│  ┌────┐                                                 │
│  │ 📡 │  WebSocket       [已连接]                       │
│  └────┘                   ●●●●● (脉冲动画)              │
│                                                          │
│  最后更新: 刚刚                                          │
└─────────────────────────────────────────────────────────┘
```

**状态颜色**:
- 已连接: 绿色 (#10b981) + 脉冲动画
- 未连接: 灰色 (#94a3b8)

### 2. ActionButtons

```
┌─────────────────────────────────────────────────────────┐
│  主要操作                                                │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ▶ 运行                                           │  │
│  │  (渐变绿色背景 + 阴影 + 悬停效果)                  │  │
│  └───────────────────────────────────────────────────┘  │
│                                                          │
│  或                                                      │
│                                                          │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ■ 停止                                           │  │
│  │  (渐变红色背景 + 阴影 + 悬停效果)                  │  │
│  └───────────────────────────────────────────────────┘  │
│                                                          │
│  次要操作                                                │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐               │
│  │ 💾 保存  │ │ 📥 加载  │ │ 🗑️ 清空  │               │
│  │   ●      │ │          │ │ (危险)   │               │
│  └──────────┘ └──────────┘ └──────────┘               │
│  (未保存标记)                                            │
│                                                          │
│  AI功能                                                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │  ✨ AI生成                                        │  │
│  │  (渐变紫色背景 + 阴影 + 悬停效果)                  │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

**按钮状态**:
- 正常: 默认样式
- 悬停: 上浮 + 增强阴影
- 点击: 涟漪效果
- 禁用: 50%透明度

### 3. OutputTabs

```
┌─────────────────────────────────────────────────────────┐
│  ┌────────────┐  ┌────────────┐                         │
│  │ 📋 日志 (5)│  │ 📊 结果 (2)│                         │
│  └────────────┘  └────────────┘                         │
│  ═══════════                                             │
│  (蓝色下划线指示器)                                      │
└─────────────────────────────────────────────────────────┘
```

**标签页特性**:
- 图标 + 文本 + 徽章计数
- 下划线指示器（蓝色）
- 平滑切换动画
- 悬停效果

### 4. LogList

```
┌─────────────────────────────────────────────────────────┐
│  12:34:56.789  ℹ️  工作流开始执行                       │
│  (灰色时间戳) (蓝色图标) (白色文本)                      │
│                                                          │
│  12:34:57.123  ✓  节点执行成功  [node-1]                │
│  (灰色时间戳) (绿色图标) (白色文本) (灰色标签)           │
│                                                          │
│  12:34:58.456  ⚠️  警告: 电量低于20%                    │
│  (灰色时间戳) (橙色图标) (白色文本)                      │
│                                                          │
│  12:34:59.789  ❌  错误: 连接超时  [node-2]             │
│  (灰色时间戳) (红色图标) (白色文本) (灰色标签)           │
│                                                          │
│  ┌─────────────────────────────────────────────────┐    │
│  │  ↓  滚动到底部                                  │    │
│  └─────────────────────────────────────────────────┘    │
│  (蓝色圆形按钮，仅在用户滚动时显示)                      │
└─────────────────────────────────────────────────────────┘
```

**日志级别样式**:
- Info: 蓝色图标 (#3b82f6)
- Success: 绿色图标 (#10b981)
- Warning: 橙色图标 (#f59e0b)
- Error: 红色图标 (#ef4444)

**空状态**:
```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                    📋                                    │
│                  (大图标)                                │
│                                                          │
│                  暂无日志                                │
│                                                          │
│          运行工作流后将显示日志信息                      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 5. ResultList

```
┌─────────────────────────────────────────────────────────┐
│  ┌───────────────────────────────────────────────────┐  │
│  │  起飞节点  [node-1]              12:34:56         │  │
│  │                                                    │  │
│  │  [object] 对象                                    │  │
│  │  (橙色类型标签)                                    │  │
│  │                                                    │  │
│  │  ┌─────────────────────────────────────────────┐  │  │
│  │  │ {                                           │  │  │
│  │  │   "altitude": 100,                          │  │  │
│  │  │   "speed": 5                                │  │  │
│  │  │ }                                           │  │  │
│  │  └─────────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────┘  │
│                                                          │
│  ┌───────────────────────────────────────────────────┐  │
│  │  检测节点  [node-2]              12:34:57         │  │
│  │                                                    │  │
│  │  [image] 图像                                     │  │
│  │  (粉色类型标签)                                    │  │
│  │                                                    │  │
│  │  ┌─────────────────────────────────────────────┐  │  │
│  │  │ [图像数据]                                  │  │  │
│  │  └─────────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

**结果类型颜色**:
- string: 蓝色 (#3b82f6)
- number: 绿色 (#10b981)
- boolean: 紫色 (#8b5cf6)
- object/array: 橙色 (#f59e0b)
- image: 粉色 (#ec4899)
- video: 青色 (#06b6d4)

**空状态**:
```
┌─────────────────────────────────────────────────────────┐
│                                                          │
│                    📊                                    │
│                  (大图标)                                │
│                                                          │
│                  暂无结果                                │
│                                                          │
│          运行工作流后将显示执行结果                      │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

### 6. LogExportButtons

```
┌─────────────────────────────────────────────────────────┐
│  ┌──────────┐  ┌────────────────────────────────────┐  │
│  │ 🗑️ 清空  │  │ 📥 导出 ▼                          │  │
│  └──────────┘  └────────────────────────────────────┘  │
│                                                          │
│                 ┌────────────────────────────────────┐  │
│                 │  {} 导出为 JSON                    │  │
│                 │  📄 导出为 TXT                     │  │
│                 └────────────────────────────────────┘  │
│                 (下拉菜单，点击导出按钮时显示)           │
└─────────────────────────────────────────────────────────┘
```

## 交互动画

### 折叠/展开动画
```
展开状态 (360px)          折叠状态 (48px)
┌──────────────┐          ┌─┐
│              │          │◀│
│   内容区域   │   →→→    │ │
│              │          │ │
└──────────────┘          └─┘
(300ms 缓动动画)
```

### 按钮悬停效果
```
正常状态              悬停状态
┌──────────┐          ┌──────────┐
│  运行    │   →→→    │  运行    │ ↑ (上浮2px)
└──────────┘          └──────────┘
                      (增强阴影)
```

### 涟漪点击效果
```
点击前               点击时               点击后
┌──────────┐        ┌──────────┐        ┌──────────┐
│  运行    │   →    │  ●运行   │   →    │  运行    │
└──────────┘        └──────────┘        └──────────┘
                    (白色涟漪扩散)
```

### 标签页切换动画
```
日志标签页           结果标签页
┌────────┐          ┌────────┐
│ 日志   │          │ 结果   │
└────────┘          └────────┘
═══════             ═══════
(下划线平滑移动)
```

## 响应式布局

### 桌面端 (≥1024px)
```
┌─────────────────────────────────────────────────────────┐
│  完整显示所有内容                                        │
│  - 宽度: 360px (可调整)                                 │
│  - 固定侧边栏                                            │
│  - 所有按钮显示文本                                      │
└─────────────────────────────────────────────────────────┘
```

### 平板端 (768-1023px)
```
┌───────────────────────────────────────────────────┐
│  缩小显示                                          │
│  - 宽度: 288px (80%缩放)                          │
│  - 固定侧边栏                                      │
│  - 部分按钮隐藏文本                                │
└───────────────────────────────────────────────────┘
```

### 移动端 (<768px)
```
┌─────────────────────────────────────────────────────────┐
│  抽屉式弹出                                              │
│  - 全屏宽度                                              │
│  - 从右侧滑入                                            │
│  - 背景遮罩                                              │
│  - 只显示图标                                            │
└─────────────────────────────────────────────────────────┘
```

## 主题对比

### 明亮主题
```
┌─────────────────────────────────────────────────────────┐
│  背景: 白色 (#ffffff)                                    │
│  边框: 浅灰 (#e2e8f0)                                    │
│  文本: 深色 (#0f172a)                                    │
│  悬停: 浅灰 (#f1f5f9)                                    │
└─────────────────────────────────────────────────────────┘
```

### 暗黑主题
```
┌─────────────────────────────────────────────────────────┐
│  背景: 深灰 (#111827)                                    │
│  边框: 中灰 (#1f2937)                                    │
│  文本: 浅色 (#f1f5f9)                                    │
│  悬停: 深灰 (#1f2937)                                    │
└─────────────────────────────────────────────────────────┘
```

## 可访问性特性

### 键盘导航
- Tab: 在可交互元素间切换
- Enter/Space: 激活按钮
- Esc: 关闭下拉菜单/折叠面板
- ↑↓: 在列表中导航

### 屏幕阅读器
- 所有按钮都有 aria-label
- 状态变化有 aria-live 通知
- 语义化 HTML 结构
- 清晰的焦点指示器

### 颜色对比度
- 所有文本符合 WCAG AA 标准
- 最小对比度 4.5:1
- 状态不仅依赖颜色（还有图标）

## 性能优化

### 虚拟滚动
```
可见区域 (显示10条)
┌─────────────────────────────────────────────────────────┐
│  日志 1                                                  │
│  日志 2                                                  │
│  日志 3                                                  │
│  ...                                                     │
│  日志 10                                                 │
└─────────────────────────────────────────────────────────┘
    ↑
实际有1000条日志，但只渲染可见的10条
```

### 防抖和节流
- 搜索输入: 300ms 防抖
- 滚动事件: 16ms 节流
- 窗口调整: 100ms 节流

## 总结

控制面板采用模块化设计，每个组件都有清晰的职责和视觉层次。通过颜色、图标、动画等视觉元素，为用户提供直观的状态反馈和操作指引。
