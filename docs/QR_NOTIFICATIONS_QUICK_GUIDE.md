# 🚀 QR检测通知 - 快速指南

## 📋 功能概述

QR检测器现在会在以下情况显示通知：

| 情况 | 通知类型 | 图标 | 持续时间 |
|------|---------|------|---------|
| 检测到植株ID | 成功 | ✅ 🏷️ | 3秒 |
| 开始诊断 | 成功 | 🚀 🔬 | 3秒 |
| 未配置模型 | 错误 | 🤖 ❌ | 5秒 |
| 模型不支持视觉 | 错误 | 👁️ ❌ | 5秒 |
| 未配置Unipixel | 错误 | 🔧 ❌ | 5秒 |

---

## 🎯 使用流程

### 正常流程
```
扫描QR码 → ✅ "检测到植株 PLANT-001"
         ↓
检查配置 → 配置有效
         ↓
开始诊断 → 🚀 "开始诊断植株 PLANT-001"
         ↓
诊断完成 → 显示结果
```

### 错误处理
```
扫描QR码 → ✅ "检测到植株 PLANT-001"
         ↓
检查配置 → ❌ "未配置AI模型"
         ↓
用户配置模型
         ↓
再次扫描 → 正常工作
```

---

## 🔧 配置问题解决

### 问题1: 未配置AI模型
**通知**: 🤖 ❌ 未配置AI模型，请在PureChat中配置模型

**解决步骤**:
1. 打开PureChat
2. 选择AI模型
3. 保存配置
4. 重新扫描

### 问题2: 模型不支持视觉
**通知**: 👁️ ❌ 模型不支持视觉，请配置支持视觉的模型

**支持视觉的模型**:
- GPT-4 Vision
- GPT-4o
- Claude 3 (Opus/Sonnet/Haiku)
- Gemini Pro Vision
- Gemini 1.5 Pro

**解决步骤**:
1. 打开PureChat
2. 切换到支持视觉的模型
3. 保存配置
4. 重新扫描

### 问题3: 未配置Unipixel
**通知**: 🔧 ❌ 未配置Unipixel，请先配置Unipixel服务

**解决步骤**:
1. 启动Unipixel服务
2. 配置Unipixel端点
3. 测试连接
4. 重新扫描

---

## 📝 修改的文件

| 文件 | 修改内容 |
|------|---------|
| `python/drone_backend.py` | 添加配置检查和通知发送 |
| `hooks/useDroneControl.ts` | 添加Toast通知处理 |
| `app/layout.tsx` | 添加Toaster组件 |

---

## ✅ 快速测试

### 测试1: QR检测通知
1. 启用QR检测
2. 扫描植株QR码
3. 应该看到: ✅ "检测到植株 PLANT-XXX"

### 测试2: 诊断开始通知
1. 确保配置有效
2. 扫描植株QR码
3. 应该看到: 🚀 "开始诊断植株 PLANT-XXX"

### 测试3: 配置错误通知
1. 清除AI模型配置
2. 扫描植株QR码
3. 应该看到: 🤖 ❌ "未配置AI模型..."

---

## 🎨 通知样式

### 位置
- 右上角 (top-right)

### 颜色
- 成功: 绿色 (#10b981)
- 错误: 红色 (#ef4444)

### 背景
- 深灰色 (#1f2937)
- 半透明效果

---

## 📞 需要帮助？

查看完整文档: `QR_DETECTION_NOTIFICATIONS.md`

---

**版本**: 1.0.0  
**更新**: 2025-10-11
