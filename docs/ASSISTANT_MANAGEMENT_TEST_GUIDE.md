# 助理管理系统测试指南

## 🧪 如何测试任务 4 和 5 的功能

### 前置条件
1. 启动开发服务器：`npm run dev`
2. 打开浏览器访问应用
3. 确保你的用户角色为 `admin`（默认值）

### 测试步骤

#### 1. 查看助理列表
1. 点击左侧菜单栏的市场图标
2. 切换到 "Assistants" 标签
3. **预期结果**：
   - 看到多个助理卡片
   - 每个卡片左上角有状态标签（绿色"已发布"）
   - 卡片显示助理的图标、名称和描述

#### 2. 测试卡片悬停效果
1. 将鼠标悬停在任意助理卡片上
2. **预期结果**：
   - 卡片向上移动 2px
   - 出现淡蓝色阴影
   - 右上角出现管理按钮（淡入效果）

#### 3. 测试编辑功能
1. 悬停在任意助理卡片上
2. 点击右上角的编辑按钮（铅笔图标）
3. **预期结果**：
   - 打开助理编辑表单对话框
   - 表单预填充了助理的当前信息
   - 可以修改助理信息

#### 4. 测试发布/下架功能
1. 悬停在已发布的助理卡片上
2. 点击红色的下架按钮（停止图标）
3. **预期结果**：
   - 显示"助理已下架"消息
   - 状态标签变为橙色"草稿"
   - 助理从市场列表中消失（因为只显示已发布的）

4. 在侧边栏找到该助理
5. 悬停并点击绿色的发布按钮（火箭图标）
6. **预期结果**：
   - 显示"助理已发布到市场！"消息
   - 状态标签变为绿色"已发布"
   - 助理重新出现在市场列表中

#### 5. 测试审核功能
1. 首先需要创建一个待审核的助理：
   - 在 `assistantList` 中找到 `id: 'pending-example'` 的助理
   - 或者修改某个助理的 `status` 为 `'pending'`

2. 刷新页面后，悬停在待审核助理卡片上
3. 点击橙色的审核按钮（审计图标）
4. **预期结果**：
   - 打开审核对话框
   - 显示助理的详细信息：
     - 48px 大图标
     - 名称、作者、创建时间
     - 描述、标签、公开设置
     - 系统提示词（可滚动）
   - 底部有"拒绝"和"通过并发布"两个按钮

5. 点击"通过并发布"按钮
6. **预期结果**：
   - 显示"助理审核通过并已发布到市场！"消息
   - 对话框关闭
   - 助理状态变为"已发布"
   - 助理出现在市场列表中

#### 6. 测试删除功能
1. 悬停在任意助理卡片上
2. 点击右上角的删除按钮（垃圾桶图标）
3. **预期结果**：
   - 弹出确认对话框："确定要删除这个助理吗？此操作不可恢复。"
   - 有"删除"和"取消"两个按钮

4. 点击"删除"按钮
5. **预期结果**：
   - 显示"助理已删除"消息
   - 助理从列表中消失

#### 7. 测试权限控制
1. 修改代码中的 `userRole` 为 `'normal'`
2. 刷新页面
3. **预期结果**：
   - 悬停在助理卡片上时，不显示管理按钮
   - 右下角不显示创建助理按钮

### 测试检查清单

- [ ] 助理列表正确显示
- [ ] 状态标签颜色正确
- [ ] 卡片悬停效果流畅
- [ ] 管理按钮悬停淡入效果正常
- [ ] 编辑按钮打开表单并预填充数据
- [ ] 发布/下架按钮切换状态正确
- [ ] 审核按钮仅在待审核状态显示
- [ ] 审核对话框显示完整信息
- [ ] 审核通过/拒绝功能正常
- [ ] 删除确认对话框正常工作
- [ ] 删除后助理从列表移除
- [ ] 权限控制正确（普通用户看不到管理按钮）

### 常见问题

#### Q: 看不到管理按钮？
A: 确保 `userRole` 设置为 `'admin'`，并且鼠标悬停在卡片上。

#### Q: 审核按钮不显示？
A: 审核按钮仅在助理状态为 `'pending'` 时显示。检查 `assistantList` 中是否有待审核的助理。

#### Q: 删除后助理还在？
A: 检查浏览器控制台是否有错误。确保 `setAssistantList` 函数正常工作。

#### Q: 样式不正确？
A: 确保 CSS 变量（如 `--heroui-primary`）已正确定义。检查浏览器开发者工具中的样式。

### 调试技巧

1. **查看状态**：在浏览器控制台输入 `console.log(assistantList)` 查看当前助理列表
2. **检查权限**：在控制台输入 `console.log(userRole)` 查看当前用户角色
3. **查看错误**：打开浏览器开发者工具的 Console 标签，查看是否有错误信息
4. **检查网络**：打开 Network 标签，查看 API 请求是否正常

## 🎯 预期行为总结

### 助理卡片
- 显示状态标签（左上角）
- 悬停时向上移动并显示阴影
- 悬停时显示管理按钮（右上角，淡入效果）
- 点击卡片打开助理详情

### 管理按钮
- **审核**（橙色）：仅待审核状态显示
- **发布/下架**（绿色/红色）：非待审核状态显示
- **编辑**（灰色）：所有状态显示
- **删除**（灰色）：所有状态显示，需确认

### 审核对话框
- 显示助理完整信息
- 提供"拒绝"和"通过并发布"操作
- 操作后更新状态并关闭对话框

## ✅ 测试完成

如果所有测试项都通过，说明任务 4 和 5 已成功实现！
