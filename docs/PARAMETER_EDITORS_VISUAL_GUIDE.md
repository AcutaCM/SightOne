# 参数编辑器视觉指南

## 概述

本文档展示了重设计后的参数编辑器组件的视觉效果和交互状态。

## TextEditor（文本编辑器）

### 单行文本输入

```
┌─────────────────────────────────────────────┐
│ 默认状态                                    │
│ ┌─────────────────────────────────────────┐ │
│ │ 输入文本...                             │ │
│ └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘

┌─────────────────────────────────────────────┐
│ 聚焦状态（带光晕）                          │
│ ┌═════════════════════════════════════════┐ │
│ ║ 正在输入文本|                           ║ │
│ └═════════════════════════════════════════┘ │
│   ╰─ 编辑光晕效果                           │
└─────────────────────────────────────────────┘
```

**状态变化：**
- 默认：浅灰背景 + 浅灰边框
- 悬停：稍深的灰色背景 + 深灰边框
- 聚焦：更深的灰色背景 + 黑色边框 + 光晕

### 多行文本输入

```
┌─────────────────────────────────────────────┐
│ ┌─────────────────────────────────────────┐ │
│ │ 第一行文本                              │ │
│ │ 第二行文本                              │ │
│ │ 第三行文本                              │ │
│ └─────────────────────────────────────────┘ │
│                                  字符: 24/100│
└─────────────────────────────────────────────┘
```

## NumberEditor（数字编辑器）

### 正常状态

```
┌─────────────────────────────────────────────┐
│ ┌─────────────────────────────────────┬───┐ │
│ │ 100                                 │ cm│ │
│ └─────────────────────────────────────┴───┘ │
│   ╰─ 等宽字体                    ╰─ 单位   │
└─────────────────────────────────────────────┘
```

### 错误状态

```
┌─────────────────────────────────────────────┐
│ ┌═════════════════════════════════════┬───┐ │
│ ║ 999                                 │ cm║ │
│ └═════════════════════════════════════┴───┘ │
│ ⚠ 值不能大于 500                            │
│   ╰─ 红色边框和背景      ╰─ 错误提示       │
└─────────────────────────────────────────────┘
```

**特性：**
- 使用等宽字体（monospace）
- 实时验证
- 错误状态红色高亮
- 支持单位显示

## SliderEditor（滑块编辑器）

### 默认状态

```
┌─────────────────────────────────────────────┐
│ 当前值: 50cm          范围: 0cm - 100cm     │
│                                             │
│ ●━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ ╰─ 滑块（黑色）  ╰─ 轨道（灰色）           │
└─────────────────────────────────────────────┘
```

### 拖拽状态

```
┌─────────────────────────────────────────────┐
│ 当前值: 75cm          范围: 0cm - 100cm     │
│                                             │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━●━━━━━━━━━━━━ │
│                              ╰─ 放大 + 光晕 │
└─────────────────────────────────────────────┘
```

**特性：**
- 拖拽时滑块放大（scale 1.1）
- 拖拽时显示光晕阴影
- 值显示使用等宽字体
- 平滑的动画过渡

## SelectEditor（下拉选择器）

### 关闭状态

```
┌─────────────────────────────────────────────┐
│ ┌─────────────────────────────────────┬─┐  │
│ │ 请选择...                           │▼│  │
│ └─────────────────────────────────────┴─┘  │
└─────────────────────────────────────────────┘
```

### 打开状态

```
┌─────────────────────────────────────────────┐
│ ┌═════════════════════════════════════┬─┐  │
│ ║ 选项 1                              │▲║  │
│ └═════════════════════════════════════┴─┘  │
│ ┌─────────────────────────────────────────┐│
│ │ 选项 1                                  ││
│ │ 选项 2  ← 悬停（浅灰背景）             ││
│ │ 选项 3                                  ││
│ └─────────────────────────────────────────┘│
│   ╰─ 下拉菜单（带边框和阴影）              │
└─────────────────────────────────────────────┘
```

**特性：**
- 打开时显示编辑光晕
- 选项悬停时背景变化
- 下拉菜单使用主题样式
- 平滑的展开/收起动画

## 颜色系统

### 浅色主题

| 元素 | 默认 | 悬停 | 聚焦/编辑 | 错误 |
|------|------|------|-----------|------|
| 背景 | #F8F8F8 | #F0F0F0 | #E8E8E8 | #FEE |
| 边框 | #E0E0E0 | #D0D0D0 | #999999 | #DC2626 |
| 文本 | #1A1A1A | #666666 | #1A1A1A | #DC2626 |
| 光晕 | - | - | rgba(0,0,0,0.08) | - |

### 深色主题

| 元素 | 默认 | 悬停 | 聚焦/编辑 | 错误 |
|------|------|------|-----------|------|
| 背景 | #242424 | #2E2E2E | #383838 | rgba(220,38,38,0.1) |
| 边框 | #3A3A3A | #4A4A4A | #666666 | #EF4444 |
| 文本 | #E5E5E5 | #999999 | #E5E5E5 | #EF4444 |
| 光晕 | - | - | rgba(255,255,255,0.08) | - |

## 动画时序

所有编辑器使用一致的动画时序：

```
状态变化动画：
├─ 颜色过渡：200ms ease
├─ 边框过渡：200ms ease
├─ 阴影过渡：200ms ease
└─ 缩放过渡：200ms ease

交互反馈：
├─ 悬停：即时响应
├─ 聚焦：200ms 淡入
├─ 失焦：200ms 淡出
└─ 错误：弹簧动画（shake）
```

## 交互流程

### 文本输入流程

```
1. 用户点击输入框
   ↓
2. 输入框获得焦点
   - 背景变深
   - 边框变黑
   - 显示光晕
   ↓
3. 用户输入文本
   - 实时更新值
   - 显示字符计数
   ↓
4. 用户按 Enter 或点击外部
   ↓
5. 输入框失去焦点
   - 恢复默认样式
   - 触发 onBlur 回调
```

### 数字输入流程

```
1. 用户点击数字输入框
   ↓
2. 输入框获得焦点并选中所有文本
   ↓
3. 用户输入数字
   - 实时验证
   - 显示错误（如果有）
   ↓
4. 验证通过
   - 更新值
   - 清除错误
   ↓
5. 验证失败
   - 显示错误消息
   - 红色边框和背景
   - 失焦时恢复原值
```

### 滑块操作流程

```
1. 用户点击滑块
   ↓
2. 滑块放大并显示光晕
   ↓
3. 用户拖动滑块
   - 实时更新值
   - 显示当前值
   ↓
4. 用户释放滑块
   ↓
5. 滑块恢复正常大小
   - 触发 onBlur 回调
```

### 下拉选择流程

```
1. 用户点击下拉框
   ↓
2. 下拉框打开
   - 显示编辑光晕
   - 展开选项列表
   ↓
3. 用户悬停选项
   - 选项背景变化
   ↓
4. 用户点击选项
   ↓
5. 下拉框关闭
   - 更新选中值
   - 触发 onBlur 回调
```

## 响应式设计

所有编辑器都支持：
- 自适应宽度
- 触摸设备优化
- 键盘导航
- 屏幕阅读器支持

## 最佳实践

1. **使用合适的编辑器**：
   - 短文本 → TextEditor (单行)
   - 长文本 → TextEditor (多行)
   - 数字 → NumberEditor
   - 范围值 → SliderEditor
   - 固定选项 → SelectEditor

2. **提供清晰的反馈**：
   - 始终显示当前值
   - 提供单位（如果适用）
   - 显示有效范围
   - 清晰的错误消息

3. **优化用户体验**：
   - 自动聚焦（适当时）
   - 选中所有文本（数字输入）
   - 支持键盘快捷键
   - 提供工具提示

## 可访问性

所有编辑器都遵循 WCAG 2.1 AA 标准：
- ✅ 颜色对比度 ≥ 4.5:1
- ✅ 键盘可访问
- ✅ 屏幕阅读器友好
- ✅ 焦点指示器清晰
- ✅ 错误消息可访问

## 总结

重设计后的参数编辑器提供了：
- 🎨 统一的黑白灰主题
- ⚡ 流畅的动画效果
- 🎯 清晰的交互反馈
- ♿ 优秀的可访问性
- 📱 完整的响应式支持
